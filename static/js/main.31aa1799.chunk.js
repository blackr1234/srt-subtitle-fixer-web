(this["webpackJsonpsrt-subtitle-fixer-web"]=this["webpackJsonpsrt-subtitle-fixer-web"]||[]).push([[0],{42:function(e,t,i){},45:function(e,t){},46:function(e,t,i){},55:function(e,t,i){},56:function(e,t,i){},57:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i(27),s=i.n(a),c=(i(42),i(43),i(33)),r=i(8),l=i(12),o=i(9),d=i(17),h=i(34),b=i(13),j=i(19),u=i(60),g=i(28),m=i.n(g),x=i(16),p=i.n(x),O=i(29),f=i.n(O),k=i(30),y=i.n(k);const v="https://srt-subtitle-fixer-production.up.railway.app";var C=i(31),S=i.n(C),T=i(32),w=i.n(T),F=(i(46),i(2));function A(e){const{beforeText:t,afterText:i}=e,[a,s]=Object(n.useState)(!1),c=new S.a,r=c.main(t,i),h=c.prettyHtml(r).replaceAll(/<br\s*\/>/g,"").replaceAll(/<span>([\d\D]*?)<\/span>/g,((e,t,i,n)=>{const a=t.split("\r"),s=a.length;return s>=26?["<span>".concat(a.slice(0,3).join("\r")),"\u3010 ~ <em>".concat(s-6," lines omitted</em> ~ \u3011"),"".concat(a.slice(-3).join("\r"),"</span>")].join("\r\r"):e})),b='<pre style="white-space: pre-wrap;">'.concat(h,"</pre>");return Object(F.jsxs)(j.a,{children:[Object(F.jsx)(l.a,{children:Object(F.jsx)(o.a,{children:Object(F.jsx)("h6",{children:"Text Diff"})})}),Object(F.jsx)(l.a,{children:Object(F.jsxs)(o.a,{children:[Object(F.jsx)("div",{className:"diff-section",dangerouslySetInnerHTML:{__html:w.a.sanitize(b+(a?"":'\n<div style="\n\tposition: sticky;\n\twidth: 100%;\n\theight: 5em;\n\ttextAlign: center;\n\tbackground: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, white 90%);\n\tleft: 0;\n\tbottom: -1px;\n\tzIndex: 1;\n"></div>\n'))},style:{height:a?"20em":"10em",overflowY:a?"auto":"hidden"}}),!a&&Object(F.jsx)(d.a,{variant:"light",size:"sm",block:!0,onClick:()=>s(!0),style:{color:"#546e7a",fontWeight:"bold"},children:"Click to expand"})]})})]})}const Y=Object(n.memo)(A,((e,t)=>e.beforeText===t.beforeText&&e.afterText===t.afterText));var D=i.p+"static/media/logo.b78f1401.svg";const L=e=>{const t=Number(e);return 0===t||t>0||t<0},M=e=>y.a.stringify(f()(p()().utc().format("YYYY-MM-DD HH:mm")+"_"+e));function H(e){const[t,i]=Object(n.useState)(!1),[a,s]=Object(n.useState)(!1),[g,x]=Object(n.useState)([]),[p,O]=Object(n.useState)([]),[f,k]=Object(n.useState)(""),[y,C]=Object(n.useState)(""),[S,T]=Object(n.useState)(""),[w,A]=Object(n.useState)(!1),[H,B]=Object(n.useState)({sortByTime:!0,removeFormatting:!0,correctSeqNums:!0,keepFirstLine:!1,singleLine:!0,chineseTranslation:"TC",adjustTime:0,expandOrShrinkDuration:0}),N=(e,t)=>B((i=>({...i,[e]:t}))),z=()=>{u.a.post("".concat(v,"/subtitle/fix"),(()=>{const e=new FormData;for(const t in H)e.append(t,H[t]);return e.append("sessionKey",M(H.subtitleFile.name)),e})()).then((e=>{if(e&&e.data){"SUCCESS"!==e.data.status&&(x(e.data.warnMsgs),O(e.data.errorMsgs));const t=e.data.srtFileContent,i=f.replace(/\.(ass|srt)$/,".srt");if(t){const e=new Blob([t],{type:"text/plain;charset=utf-8"});m.a.saveAs(e,i),T(t)}}})).catch((e=>{O(["Network error."])})).finally((()=>{s(!1),i(!0),A(!1),B((e=>({...e,subtitleFile:null})))}))};return Object(F.jsxs)(c.a,{style:{boxShadow:"0 0 1em rgba(0, 0, 0, 0.25)"},children:[Object(F.jsxs)(j.a,{children:[Object(F.jsx)(l.a,{children:Object(F.jsxs)(o.a,{children:[Object(F.jsx)("img",{src:D,alt:"logo",draggable:!1,onContextMenu:e=>e.preventDefault(),style:{display:"inline-flex",height:"3.5em",verticalAlign:"middle",marginRight:"20px"}}),Object(F.jsx)("h2",{style:{display:"inline-flex",margin:"0",verticalAlign:"middle"},children:"Welcome to SRT Subtitle Fixer!"})]})}),Object(F.jsx)("div",{style:{padding:"20px"}}),Object(F.jsx)(l.a,{children:Object(F.jsx)(o.a,{children:Object(F.jsxs)(r.a,{children:[Object(F.jsx)(r.a.Group,{children:Object(F.jsx)(r.a.File,{custom:!0,id:"subtitleFile",accept:".ass, .srt",label:H.subtitleFile&&H.subtitleFile.name||"Select ASS/SRT file\u2026",disabled:a,onClick:e=>e.target.value=null,onDragOver:e=>e.target.value=null,onChange:e=>{const t=e.target.files[0];N(e.target.id,t),k(t.name),T("")}})}),Object(F.jsx)("p",{style:{color:"#78909c"},children:"Note: If the file is in ASS format, it will be automatically converted into SRT."}),Object(F.jsxs)(r.a.Group,{children:[Object(F.jsx)(r.a.Check,{custom:!0,inline:!0,label:"Traditional Chinese",type:"radio",name:"chineseTranslation",id:"TC",onChange:e=>N(e.target.name,e.target.id),checked:"TC"===H.chineseTranslation,disabled:a}),Object(F.jsx)(r.a.Check,{custom:!0,inline:!0,label:"Simplified Chinese",type:"radio",name:"chineseTranslation",id:"SC",onChange:e=>N(e.target.name,e.target.id),checked:"SC"===H.chineseTranslation,disabled:a}),Object(F.jsx)(r.a.Check,{custom:!0,type:"checkbox",id:"sortByTime",label:"Sort by time",onChange:e=>N(e.target.id,e.target.checked),checked:H.sortByTime,disabled:a}),Object(F.jsx)(r.a.Check,{custom:!0,type:"checkbox",id:"removeFormatting",label:"Remove formatting",onChange:e=>N(e.target.id,e.target.checked),checked:H.removeFormatting,disabled:a}),Object(F.jsx)(r.a.Check,{custom:!0,type:"checkbox",id:"correctSeqNums",label:"Correct sequence numbers",onChange:e=>N(e.target.id,e.target.checked),checked:H.correctSeqNums,disabled:a}),Object(F.jsx)(r.a.Check,{custom:!0,type:"checkbox",id:"keepFirstLine",label:"Keep only the first subtitle line",onChange:e=>{N(e.target.id,e.target.checked),e.target.checked&&B((e=>({...e,singleLine:!1})))},checked:H.keepFirstLine,disabled:a}),Object(F.jsx)(r.a.Check,{custom:!0,type:"checkbox",id:"singleLine",label:"Combine multi-line subtitles into single line",onChange:e=>{H.keepFirstLine?e.preventDefault():N(e.target.id,e.target.checked)},checked:H.singleLine,disabled:a||H.keepFirstLine})]}),Object(F.jsxs)(r.a.Group,{as:l.a,children:[Object(F.jsx)(r.a.Label,{column:!0,sm:3,children:"Adjust time (ms):"}),Object(F.jsx)(o.a,{sm:3,children:Object(F.jsx)(r.a.Control,{type:"text",id:"adjustTime",value:H.adjustTime,style:{textAlign:"center"},onChange:e=>N(e.target.id,e.target.value),onBlur:e=>{L(e.target.value)?B((t=>({...t,[e.target.id]:Number(H[e.target.id])}))):B((t=>({...t,[e.target.id]:0})))},disabled:a})})]}),Object(F.jsxs)(r.a.Group,{as:l.a,children:[Object(F.jsx)(r.a.Label,{column:!0,sm:3,children:"Expand/shrink duration (ms):"}),Object(F.jsx)(o.a,{sm:3,children:Object(F.jsx)(r.a.Control,{type:"text",id:"expandOrShrinkDuration",value:H.expandOrShrinkDuration,style:{textAlign:"center"},onChange:e=>N(e.target.id,e.target.value),onBlur:e=>{L(e.target.value)?B((t=>({...t,[e.target.id]:Number(H[e.target.id])}))):B((t=>({...t,[e.target.id]:0})))},disabled:a})})]}),Object(F.jsxs)(r.a.Group,{children:[Object(F.jsx)(d.a,{variant:"dark",disabled:a||!H.subtitleFile,onClick:a?null:()=>{x([]),O([]),s(!0),T("");const e=new FileReader;e.onloadend=e=>{const t=e.target.result,n=H.subtitleFile.name,a=H.subtitleFile.size;t&&a<=1048576?(C(t),z()):(s(!1),i(!0),B((e=>({...e,subtitleFile:null}))),O([t?'The size of the "'.concat(n,'" is ').concat(a," Bytes which exceeds the limit of 1MB."):'Failed to read "'.concat(n,'". ').concat(e.target.error?e.target.error.message:"Please make sure your file is not empty.")]))},e.readAsText(H.subtitleFile)},children:a?"Processing\u2026":"Start"}),a&&Object(F.jsx)(h.a,{animation:"border",variant:"secondary",size:"sm",style:{verticalAlign:"middle",marginLeft:"1em"}})]}),!t||H.subtitleFile||a||g&&g.length||p&&p.length?null:Object(F.jsx)(r.a.Group,{children:Object(F.jsxs)(b.a,{variant:"success",children:[Object(F.jsx)(b.a.Heading,{as:"h6",children:"Success"}),"All good!"]})}),g&&g.length&&!H.subtitleFile?Object(F.jsxs)(r.a.Group,{children:[Object(F.jsxs)(b.a,{variant:"warning",style:{marginBottom:"0",height:w&&g.length>11?"20em":!w&&g.length>5?"10em":"auto",whiteSpace:"nowrap",overflowX:w?"auto":"hidden",overflowY:w?"auto":"hidden"},children:[Object(F.jsxs)(b.a.Heading,{as:"h6",children:["Warnings (",g.length,")"]}),g.map(((e,t)=>Object(F.jsx)("div",{children:e},t))),!w&&g.length>5&&Object(F.jsx)("div",{style:{position:"absolute",width:"100%",height:"5em",textAlign:"center",background:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, white 90%)",left:0,bottom:0,zIndex:1}})]}),!w&&g.length>5&&Object(F.jsx)(d.a,{variant:"light",size:"sm",block:!0,onClick:()=>A(!0),style:{color:"#546e7a",fontWeight:"bold"},children:"Click to expand"})]}):null,p&&p.length&&!H.subtitleFile?Object(F.jsx)(r.a.Group,{children:Object(F.jsxs)(b.a,{variant:"danger",children:[Object(F.jsxs)(b.a.Heading,{as:"h6",children:["Errors (",p.length,")"]}),p.map(((e,t)=>Object(F.jsx)("div",{children:e},t)))]})}):null]})})})]}),y&&S&&Object(F.jsx)(Y,{beforeText:y,afterText:S})]})}const B=Object(n.memo)(H,((e,t)=>!0));function N(e){const t=(new Date).getFullYear(),i=1707830336640,n={branch:"master",tags:[],commit:{shortHash:"d08f1b0",hash:"d08f1b04f43dac40329a915278646e8f71e4413f",date:"2024-02-13T21:18:49+08:00",message:"Init."}};return Object(F.jsxs)("div",{className:"site-footer",style:{color:"#607d8b",textAlign:"center"},children:[Object(F.jsxs)("div",{children:["Copyright \xa9 ",t," Chung Cheuk Hang Michael. All rights reserved."]}),"Last Updated On:"," ",Object(F.jsx)("span",{title:p()(i).format("D MMM YYYY HH:mm:ss"),style:{cursor:"help"},children:p()(i).format("D MMM YYYY")})," ","/"," ",Object(F.jsx)("span",{title:n.commit.hash,style:{cursor:"help"},children:n.commit.shortHash})]})}const z=Object(n.memo)(N,((e,t)=>!0));i(55),i(56);var G=function(e){return Object(F.jsxs)("div",{style:{padding:"2.5vw 5vw"},children:[Object(F.jsx)(B,{}),Object(F.jsx)(z,{})]})};s.a.createRoot(document.getElementById("root")).render(Object(F.jsx)(G,{}))}},[[57,1,2]]]);